# SAM3 Gradio演示系统使用指南

这是一个基于SAM3模型的Gradio演示系统，支持图像分割和视频目标跟踪功能。

## 功能特点

- **图像分割**：支持文本提示、点提示和框提示的图像分割
- **视频跟踪**：支持文本提示的视频目标跟踪
- **相对路径**：使用相对路径，便于在其他电脑环境运行
- **用户友好**：提供直观的Web界面，无需编程知识

## 环境要求

- Python 3.8+
- PyTorch
- CUDA（推荐，用于GPU加速）
- 其他依赖见requirements.txt

## 安装步骤

1. 克隆或下载此项目
2. 安装依赖：
   ```
   pip install -r requirements.txt
   ```

3. 下载模型文件：
   - 从SAM3官方仓库下载模型文件 `sam3_h.pth`
   - 下载BPE词汇表文件 `bpe_simple_vocab_16e6.txt.gz`
   - 将这两个文件放入 `models` 目录

## 使用方法

1. 启动演示系统：
   ```
   python sam3_gradio_demo.py
   ```

2. 打开浏览器访问显示的URL（通常是 http://localhost:7860）

3. 使用界面：
   - **图像分割**：上传图像，提供提示，点击"分割图像"
   - **视频跟踪**：上传视频，提供文本提示，点击"处理视频"

## 提示格式

- **文本提示**：直接输入描述，如"一只猫"
- **点提示**：格式为"x1,y1;x2,y2;..."，如"100,100;200,200"
- **框提示**：格式为"x1,y1,x2,y2;x1,y1,x2,y2;..."，如"50,50,150,150;200,200,300,300"

## 注意事项

- 首次运行时需要加载模型，可能需要一些时间
- 处理大视频文件可能需要较长时间和较多内存
- 建议使用GPU加速以提高处理速度
- 如果遇到内存不足，可以尝试减小视频分辨率或处理帧数

## 故障排除

1. **模型加载失败**：检查模型文件是否正确下载并放置在models目录
2. **CUDA内存不足**：尝试使用CPU模式或减小批处理大小
3. **依赖安装失败**：确保使用正确的Python版本和PyTorch版本

## 许可证

本项目遵循SAM3的许可证条款。